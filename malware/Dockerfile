# malware/Dockerfile
FROM python:3.11-slim

# install any python deps if needed (none required for simple tamper)
# RUN pip install --no-cache-dir somepackage

# create an app user to avoid running as root
RUN useradd -m -s /bin/bash appuser

WORKDIR /app

# copy tamper proof-of-concept code
COPY tamper.py /app/tamper.py

# set a non-root user
RUN chown -R appuser:appuser /app
USER appuser

# default command runs the tamper script. docker-compose overrides can pass env vars
CMD ["python3", "tamper.py"]
